---
categories:
- ""
- ""
date: "2017-10-31T21:28:43-05:00"
description: ""
draft: true
image: pic10.jpg
keywords: ""
slug: ipsum
title: Ipsum
---



<pre class="r"><code>knitr::include_graphics(here::here(&quot;images&quot;, &quot;directors.png&quot;), error = FALSE)</code></pre>
<p><img src="../../images/directors.png" width="100%" style="display: block; margin: auto;" /></p>
<p>First, I would like you to reproduce this graph. You may find <code>geom_errorbar()</code> and <code>geom_rect()</code> useful.</p>
<p>In addition, you will run a hpothesis test. You should use both the <code>t.test</code> command and the <code>infer</code> package to simulate from a null distribution, where you assume zero difference between the two.</p>
<blockquote>
<p>Before anything, write down the null and alternative hypotheses, as well as the resulting test statistic and the associated t-stat or p-value. At the end of the day, what do you conclude?</p>
</blockquote>
<blockquote>
<p>The null hypothesis is that there is no difference in the ratings between Spielberg and Burton movies. The alternative hypothesis is that there is a difference in ratings between the 2 directors. la la</p>
<p><code>t = 3</code> <code>p-value = 0.01</code></p>
</blockquote>
<pre class="r"><code>movies &lt;- read_csv(here::here(&quot;data&quot;, &quot;movies.csv&quot;))
glimpse(movies)</code></pre>
<pre><code>## Rows: 2,961
## Columns: 11
## $ title               &lt;chr&gt; &quot;Avatar&quot;, &quot;Titanic&quot;, &quot;Jurassic World&quot;, &quot;The Avenge…
## $ genre               &lt;chr&gt; &quot;Action&quot;, &quot;Drama&quot;, &quot;Action&quot;, &quot;Action&quot;, &quot;Action&quot;, &quot;…
## $ director            &lt;chr&gt; &quot;James Cameron&quot;, &quot;James Cameron&quot;, &quot;Colin Trevorrow…
## $ year                &lt;dbl&gt; 2009, 1997, 2015, 2012, 2008, 1999, 1977, 2015, 20…
## $ duration            &lt;dbl&gt; 178, 194, 124, 173, 152, 136, 125, 141, 164, 93, 1…
## $ gross               &lt;dbl&gt; 7.61e+08, 6.59e+08, 6.52e+08, 6.23e+08, 5.33e+08, …
## $ budget              &lt;dbl&gt; 2.37e+08, 2.00e+08, 1.50e+08, 2.20e+08, 1.85e+08, …
## $ cast_facebook_likes &lt;dbl&gt; 4834, 45223, 8458, 87697, 57802, 37723, 13485, 920…
## $ votes               &lt;dbl&gt; 886204, 793059, 418214, 995415, 1676169, 534658, 9…
## $ reviews             &lt;dbl&gt; 3777, 2843, 1934, 2425, 5312, 3917, 1752, 1752, 35…
## $ rating              &lt;dbl&gt; 7.9, 7.7, 7.0, 8.1, 9.0, 6.5, 8.7, 7.5, 8.5, 7.2, …</code></pre>
<pre class="r"><code> confidence_interval &lt;- movies %&gt;% 
  filter(director == &#39;Steven Spielberg&#39; | director==&#39;Tim Burton&#39;) %&gt;% 
  group_by(director) %&gt;% 
  summarize(mean_rating = mean(rating),
            sd_rating = sd(rating), 
            count=n(),
            t_critical = qt(0.975, count-1),
            se_rating = sd(rating)/sqrt(count),
            margin_of_error = t_critical * se_rating, 
            rating_high = mean_rating + margin_of_error, 
            rating_low = mean_rating - margin_of_error) 

points &lt;- confidence_interval %&gt;% 
  select(c(&#39;director&#39;, &#39;mean_rating&#39;,&#39;rating_high&#39;,&#39;rating_low&#39;))

ggplot(confidence_interval, aes(x=mean_rating, y=director)) +
  
  geom_rect(aes(xmin = 7.27, xmax = 7.33, ymin = -Inf, ymax = Inf), fill=&quot;light gray&quot;) +
  
  geom_errorbar(aes(xmin=rating_low, xmax=rating_high, colour=director), width=.2,
                 position=position_dodge(.9)) +
  
  geom_point(data=points, aes(x=mean_rating, y=director)) +
  geom_text(aes(label=round(mean_rating, digits=2)), nudge_y=0.04, size=3) +
  
  geom_point(data=points, aes(x=rating_high, y=director)) +
  geom_text(aes(label=round(rating_high, digits=2)), nudge_x=0.35, nudge_y=0.04, size=3) +
  
  geom_point(data=points, aes(x=rating_low, y=director)) +
  geom_text(aes(label=round(rating_low, digits=2)), nudge_x=-0.35, nudge_y=0.04, size=3) +
  
  labs(title=&quot;Do Spielberg and Burton have the same mean IMDB ratings?&quot;, subtitle=&quot;95% confidence intervals overlap&quot;, x=&quot;Mean IMDB Rating&quot;, y=&quot;&quot;) +
  theme(legend.position = &#39;none&#39;) +
  
  NULL</code></pre>
<p><img src="/blogs/blog1_files/figure-html/replicating%20Burton,%20Spielberg%20IMDB%20ratings-1.png" width="648" style="display: block; margin: auto;" /></p>
<pre class="r"><code>t_data &lt;- movies %&gt;% 
                 filter(director == &#39;Steven Spielberg&#39; | director==&#39;Tim Burton&#39;)
t.test(rating~director, t_data)</code></pre>
<pre><code>## 
##  Welch Two Sample t-test
## 
## data:  rating by director
## t = 3, df = 31, p-value = 0.01
## alternative hypothesis: true difference in means between group Steven Spielberg and group Tim Burton is not equal to 0
## 95 percent confidence interval:
##  0.16 1.13
## sample estimates:
## mean in group Steven Spielberg       mean in group Tim Burton 
##                           7.57                           6.93</code></pre>
<pre class="r"><code># calculating observed statistic
obs &lt;- movies %&gt;% 
  filter(director == &#39;Steven Spielberg&#39; | director==&#39;Tim Burton&#39;) %&gt;% 
  specify(rating ~ director) %&gt;% 
  calculate(stat = &quot;diff in means&quot;)

# simulate data
set.seed(4567)
sim &lt;- movies %&gt;% 
  filter(director == &#39;Steven Spielberg&#39; | director==&#39;Tim Burton&#39;) %&gt;% 
  specify(rating ~ director) %&gt;% 
  hypothesize(null = &quot;independence&quot;) %&gt;% 
  generate(reps=1000, type=&#39;permute&#39;) %&gt;% 
  calculate(stat=&quot;diff in means&quot;)


visualize(sim) +
  shade_p_value(obs_stat = obs, direction = &quot;greater&quot;)</code></pre>
<p><img src="/blogs/blog1_files/figure-html/using%20infer-1.png" width="648" style="display: block; margin: auto;" /></p>
<pre class="r"><code>sim %&gt;%
  get_p_value(obs_stat = obs, direction = &quot;greater&quot;)</code></pre>
<pre><code>## # A tibble: 1 × 1
##   p_value
##     &lt;dbl&gt;
## 1   0.005</code></pre>
